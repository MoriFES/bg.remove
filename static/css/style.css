:root {
  --bg: #0f1115;
  --bg-alt: #181b21;
  --bg-soft: #1f242c;
  --border: #2a3039;
  --border-strong: #3a424d;
  --text: #f5f7fa;
  --text-dim: #b4bcc8;
  --accent: #6366f1;
  --accent-accent: #818cf8;
  --danger: #ef4444;
  --radius-xs: 4px;
  --radius-sm: 6px;
  --radius: 10px;
  --shadow-sm: 0 1px 2px rgba(0,0,0,.4), 0 0 0 1px rgba(255,255,255,.02) inset;
  --shadow: 0 4px 18px -4px rgba(0,0,0,.55), 0 2px 4px -1px rgba(0,0,0,.4);
  --transition: 120ms cubic-bezier(.4,0,.2,1);
  --focus: 0 0 0 3px rgba(99,102,241,.5), 0 0 0 1px var(--accent);
}

html[data-theme='light'] {
  --bg: #f5f7fb;
  --bg-alt: #ffffff;
  --bg-soft: #eef1f5;
  --border: #dbe1ea;
  --border-strong: #c4cdd8;
  --text: #1b2430;
  --text-dim: #5a6676;
  --accent: #4f46e5;
  --accent-accent: #6366f1;
  --danger: #dc2626;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: 'Inter', system-ui, Arial, sans-serif;
  background: linear-gradient(140deg,var(--bg) 0%, var(--bg-alt) 70%);
  color: var(--text);
  -webkit-font-smoothing: antialiased;
  text-rendering: optimizeLegibility;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}

h1,h2,h3 { font-weight: 600; letter-spacing: -.5px; }

p { line-height: 1.5; }

a { color: var(--accent); text-decoration: none; }
a:hover { text-decoration: underline; }

code { background: var(--bg-soft); padding: 2px 6px; border-radius: var(--radius-xs); font-size: .85rem; }

.app-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: .9rem 1.5rem; gap: 1.25rem;
  backdrop-filter: blur(16px) saturate(1.2);
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0));
  border-bottom: 1px solid var(--border);
  position: sticky; top: 0; z-index: 40;
}

.brand { display: flex; align-items: center; gap: .9rem; }
.brand .logo { font-size: 1.85rem; filter: drop-shadow(0 2px 4px rgba(0,0,0,.4)); }
.brand h1 { font-size: 1.35rem; margin: 0; }
.brand .subtitle { font-size: .7rem; opacity: .65; font-weight: 500; letter-spacing: 1px; text-transform: uppercase; }

.header-actions { display: flex; gap: .6rem; align-items: center; }

.main { width: min(1240px, 100%); margin: 0 auto; padding: 2.2rem 1.7rem 4rem; flex: 1; display: flex; flex-direction: column; gap: 2.5rem; }
.hero { text-align: center; max-width: 840px; margin: 0 auto; }
.hero h2 { font-size: clamp(1.9rem, 4vw, 2.85rem); background: linear-gradient(90deg,var(--accent-accent),var(--accent)); -webkit-background-clip: text; color: transparent; margin: 0 0 .8rem; }
.hero .tagline { margin: 0 auto; max-width: 640px; font-size: 1.05rem; color: var(--text-dim); }

.uploader {
  border: 1.5px dashed var(--border-strong);
  padding: 1.6rem 1.4rem; border-radius: calc(var(--radius) + 4px);
  background: linear-gradient(135deg,var(--bg-alt) 0%, var(--bg-soft) 100%);
  position: relative; transition: var(--transition);
}
.uploader:focus-within { outline: none; box-shadow: var(--focus); }
.uploader.dragover { border-color: var(--accent); background: linear-gradient(135deg,var(--bg-soft),var(--bg-alt)); }

.uploader-inner { text-align: center; display: grid; place-items: center; gap: .35rem; padding: 1rem 0 1.1rem; }
.icon-cloud { color: var(--accent); opacity: .9; }
.lead { font-size: 1.05rem; font-weight: 500; }
.muted { font-size: .8rem; color: var(--text-dim); }
.link { background: none; border: none; color: var(--accent); font: inherit; text-decoration: underline; cursor: pointer; padding: 0; }
.link:hover { opacity: .8; }

.progress { position: relative; margin-top: 1rem; background: var(--bg-soft); border: 1px solid var(--border); border-radius: var(--radius-sm); height: 12px; overflow: hidden; display: flex; align-items: center; }
.progress .bar { position: absolute; inset: 0; width: 0%; background: linear-gradient(90deg,var(--accent),var(--accent-accent)); transition: width 180ms ease; }
.progress span { position: absolute; inset: 0; font-size: .65rem; text-align: center; line-height: 12px; letter-spacing: .5px; color: var(--text-dim); }

.error { margin-top: 1rem; padding: .75rem 1rem; background: linear-gradient(125deg,#3b0d0d,#4d1c1c); border: 1px solid rgba(239,68,68,.5); color: #ffb4b4; font-size: .8rem; border-radius: var(--radius-sm); box-shadow: 0 0 0 1px rgba(239,68,68,.25), 0 4px 10px -2px rgba(0,0,0,.45); }

.results { display: flex; flex-direction: column; gap: 2rem; }
.panels { display: grid; grid-template-columns: repeat(auto-fit,minmax(320px,1fr)); gap: 2rem; }
.panel { display: flex; flex-direction: column; gap: .9rem; }
.panel h3 { margin: 0; font-weight: 600; letter-spacing: .5px; font-size: .95rem; text-transform: uppercase; color: var(--text-dim); }
.image-frame { position: relative; aspect-ratio: 4/3; border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; display: grid; place-items: center; background: var(--bg-soft); box-shadow: var(--shadow-sm); }
.image-frame img { max-width: 100%; max-height: 100%; width: auto; height: auto; object-fit: contain; display: block; }
.checker { background-image: linear-gradient(45deg,#aaa 25%,transparent 25%), linear-gradient(-45deg,#aaa 25%,transparent 25%), linear-gradient(45deg,transparent 75%,#aaa 75%), linear-gradient(-45deg,transparent 75%,#aaa 75%); background-size: 24px 24px; background-position: 0 0,0 12px,12px -12px,-12px 0; filter: brightness(.85); }

.skeleton { position: absolute; inset: 0; background: repeating-linear-gradient(-45deg, rgba(255,255,255,.08) 0 12px, rgba(255,255,255,.2) 12px 24px); animation: slide 1.6s linear infinite; }
@keyframes slide { from { background-position: 0 0; } to { background-position: 0 48px; } }

.actions-row { display: flex; gap: .8rem; flex-wrap: wrap; }

.btn { --btn-bg: var(--bg-soft); --btn-border: var(--border); --btn-color: var(--text); font: inherit; font-weight: 500; letter-spacing: .2px; padding: .65rem 1rem; border: 1px solid var(--btn-border); background: var(--btn-bg); color: var(--btn-color); border-radius: var(--radius-sm); cursor: pointer; display: inline-flex; align-items: center; gap: .5rem; position: relative; transition: var(--transition); }
.btn:hover { background: var(--bg-alt); }
.btn:active { transform: translateY(1px); }
.btn.primary { --btn-bg: linear-gradient(90deg,var(--accent-accent),var(--accent)); --btn-border: var(--accent); --btn-color: #fff; box-shadow: 0 2px 8px -2px rgba(0,0,0,.6), 0 0 0 1px rgba(255,255,255,.06) inset; }
.btn.primary:hover { filter: brightness(1.05); }
.btn.outline { --btn-bg: var(--bg-alt); --btn-border: var(--border-strong); }
.btn.ghost { background: none; border: 1px solid transparent; color: var(--text-dim); }
.btn.ghost:hover { color: var(--text); background: var(--bg-soft); border-color: var(--border); }
.btn.small { padding: .4rem .7rem; font-size: .7rem; text-transform: uppercase; letter-spacing: .8px; }
.btn[disabled] { opacity: .55; cursor: not-allowed; }

.footer { margin-top: auto; padding: 2rem 1.5rem 3rem; text-align: center; font-size: .75rem; color: var(--text-dim); display: flex; flex-direction: column; gap: .8rem; }
.footer .heart { color: #ff4d67; filter: drop-shadow(0 1px 2px rgba(0,0,0,.4)); }

.extras { display: grid; gap: 1rem; max-width: 780px; margin: 0 auto; }
.extras details { background: var(--bg-alt); border: 1px solid var(--border); padding: .9rem 1rem; border-radius: var(--radius-sm); box-shadow: var(--shadow-sm); }
.extras summary { cursor: pointer; font-weight: 500; }
.extras p { margin: .5rem 0 0; font-size: .85rem; color: var(--text-dim); }

@media (max-width: 680px) {
  .app-header { flex-wrap: wrap; }
  .brand { width: 100%; justify-content: center; }
  .header-actions { width: 100%; justify-content: center; }
  .panels { grid-template-columns: 1fr; }
  .image-frame { aspect-ratio: 3/3.6; }
}
